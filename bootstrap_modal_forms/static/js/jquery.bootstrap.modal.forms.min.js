(function(o){var a=function(a){o(a.modalID).find(a.modalContent).load(a.formURL,function(){o(a.modalID).modal("show"),o(a.modalForm).attr("action",a.formURL),n(a)})},n=function(a){o(a.submitBtn).on("click",function(o){t(a,s)}),o(a.modalID).on("hidden.bs.modal",function(n){o(a.modalForm).remove()})},t=function(a,t){o.ajax({type:o(a.modalForm).attr("method"),url:o(a.modalForm).attr("action"),data:new FormData(o(a.modalForm)[0]),contentType:!1,processData:!1,beforeSend:function(){o(a.submitBtn).prop("disabled",!0)},success:function(s){o(s).find(a.errorClass).length>0?(o(a.modalID).find(a.modalContent).html(s),o(a.modalForm).attr("action",a.formURL),n(a)):t(a)}})},s=function(a){if(a.asyncUpdate){var t=e(a.asyncSettings),s=a.asyncSettings;if(t){let t=new FormData(o(a.modalForm)[0]);t.append("asyncUpdate","True"),o.ajax({type:o(a.modalForm).attr("method"),url:o(a.modalForm).attr("action"),data:t,contentType:!1,processData:!1,success:function(t){var e=o("body");0===e.length&&console.error("django-bootstrap-modal-forms: <body> element missing in your html."),e.prepend(s.successMessage),o.ajax({type:"GET",url:s.dataUrl,dataType:"json",success:function(t){o(s.dataElementId).html(t[s.dataKey]),s.addModalFormFunction&&s.addModalFormFunction(),s.closeOnSubmit?o(a.modalID).modal("hide"):o(a.modalID).find(a.modalContent).load(a.formURL,function(){o(a.modalForm).attr("action",a.formURL),n(a)})}})}})}}else o(a.modalForm).submit()},e=function(o){var a=[];return o.successMessage||(a.push("successMessage"),console.error("django-bootstrap-modal-forms: 'successMessage' in asyncSettings is missing.")),o.dataUrl||(a.push("dataUrl"),console.error("django-bootstrap-modal-forms: 'dataUrl' in asyncSettings is missing.")),o.dataElementId||(a.push("dataElementId"),console.error("django-bootstrap-modal-forms: 'dataElementId' in asyncSettings is missing.")),o.dataKey||(a.push("dataKey"),console.error("django-bootstrap-modal-forms: 'dataKey' in asyncSettings is missing.")),o.addModalFormFunction||(a.push("addModalFormFunction"),console.error("django-bootstrap-modal-forms: 'addModalFormFunction' in asyncSettings is missing.")),!(a.length>0)};o.fn.modalForm=function(n){var t={modalID:"#modal",modalContent:".modal-content",modalForm:".modal-content form",formURL:null,errorClass:".invalid",submitBtn:".submit-btn",asyncUpdate:!1,asyncSettings:{closeOnSubmit:!1,successMessage:null,dataUrl:null,dataElementId:null,dataKey:null,addModalFormFunction:null}},s=o.extend(t,n);return this.each(function(){o(this).click(function(o){a(s)})}),this}})(jQuery);